<div class="px-10">
  <mat-tab-group (selectedTabChange)="actionChanged()">
    <mat-tab label="Login">
      <form (submit)="login($event)" class="py-10">
        <mat-form-field class="w-full mb-2">
          <mat-label>Email</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="loginEmailFormControl" matInput
                 placeholder="Ex. pat@example.com"
                 type="email">
          @if (loginEmailFormControl.hasError('email') && !loginEmailFormControl.hasError(
            'required')) {
            <mat-error>Please enter a valid email address</mat-error>
          }
          @if (loginEmailFormControl.hasError('required')) {
            <mat-error>Email is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <mat-form-field class="w-full mb-4">
          <mat-label>Password</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="loginPasswordFormControl" matInput
                 type="password">
          @if (loginPasswordFormControl.hasError('required')) {
            <mat-error>Password is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <div class="flex justify-between">
          <div class="text-red-500">
            @if (error) {
              {{ error }}
            }
          </div>
          <button class="ms-2" color="primary" mat-flat-button type="submit">Login</button>
        </div>
      </form>
    </mat-tab>

    <mat-tab label="Register">
      <form (submit)="register($event)" class="py-10">
        <mat-form-field class="w-full mb-2">
          <mat-label>First Name</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="firstNameFormControl" matInput
                 type="text">
          @if (firstNameFormControl.hasError('required')) {
            <mat-error>Email is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <mat-form-field class="w-full mb-2">
          <mat-label>Last Name</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="lastNameFormControl" matInput
                 type="text">
          @if (lastNameFormControl.hasError('required')) {
            <mat-error>Email is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <mat-form-field class="w-full mb-2">
          <mat-label>Email</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="emailFormControl" matInput
                 placeholder="Ex. pat@example.com"
                 type="email">
          @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
            <mat-error>Please enter a valid email address</mat-error>
          }
          @if (emailFormControl.hasError('required')) {
            <mat-error>Email is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <mat-form-field class="w-full mb-4">
          <mat-label>Password</mat-label>
          <input [errorStateMatcher]="matcher" [formControl]="passwordFormControl" matInput
                 type="password">
          @if (passwordFormControl.hasError('required')) {
            <mat-error>Password is <strong>required</strong></mat-error>
          }
        </mat-form-field>
        <div class="flex justify-between">
          <div class="text-red-500">
            @if (error) {
              {{ error }}
            }
          </div>
          <button class="ms-2" color="primary" mat-flat-button type="submit">Register</button>
        </div>
      </form>
    </mat-tab>
  </mat-tab-group>

</div>
@if (isLoading) {
  <mat-progress-bar class="w-full" mode="indeterminate"></mat-progress-bar>
}
